# 6.2.5. Sequence diagram debito informativo Registro delle Imprese

Il sequence diagram debito informativo *Registro delle Imprese* descrive il protocollo di comunicazione realizzato dal *Back-office SUAP* e il sistema del *Registro delle Imprese* per assicurare il debito informativo del *SUAP* al *Registro delle Imprese* nel rispetto del workflow riportato al paragrafo “6.1.1. SCIA semplice”, del workflow riportato al paragrafo “6.1.3. SCIA in ComUnica” o del workflow riportato al paragrafo “6.1.2. Autorizzazione/Domanda”.


```mermaid

sequenceDiagram
    autonumber
    
    participant B as BackOffice SUAP  
    participant RI as Registro Imprese   
    participant C as Catalogo SSU  

   
   
    Note over B,C: istanza presentata e ricevuta emessa (dopo step 22 di General-001)
    

    B ->> RI: send_instance(cui, instance_descriptor_version,instance_index)
    RI -->> B: ack
    
    RI ->> C: request_instance_descriptor(cui)
	C -->> RI: instanceDescriptor
    
    loop per ogni procedimento parte dell'istanza
        RI ->> B:  request_instance_document(cui, resource_id)
        note right of RI: resource_id da instance_index
        B -->> RI: instanceDocument
    end
    

    alt istanza corretta (dopo step 43 General-001)

        B ->> RI: send_instance(cui, instance_descriptor_version,instance_index)
        RI -->> B: ack
    
        RI ->> C: request_instance_descriptor(cui)
        C -->> RI: instanceDescriptor
        
        loop per ogni procedimento parte dell'istanza
            RI ->> B:  request_instance_document(cui, resource_id)
            note right of RI: resource_id da instance_index
            B -->> RI: instanceDocument
        end



    end

    alt richiesta integrazione e scaduti tempi integrazione (dopo step: 29 SCIA-001 o 49 DomandaAutorizzazione-001)
        B ->> RI: notify(cui, instance_descriptor_version,end_by_integration_times_expired)
        RI -->> B: ack
    end

    alt istanza integrata (dopo step: 43 SCIA-001 o 63 DomandaAutorizzazione-001)

        B ->> RI: send_instance(cui, instance_descriptor_version,instance_index)
        RI -->> B: ack
    
        RI ->> C: request_instance_descriptor(cui)
        C -->> RI: instanceDescriptor
        
        loop per ogni procedimento parte dell'istanza
            RI ->> B:  request_instance_document(cui, resource_id)
            note right of RI: resource_id da instance_index
            B -->> RI: instanceDocument
        end


    end


```

*Figura 10. Sequence diagram debito informativo Registro delle Imprese*

> vai a [6.2. Protocolli di comunicazione](06_02.md)