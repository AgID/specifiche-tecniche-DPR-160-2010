title Scenario 3
bottomparticipants 
participant BO
participantgroup #lightblue **Ente Terzo**
actor OperatoreAssegnazioneIstanza #green
actor OperatoreControllo #blue
actor OperatoreIstruttore #yellow
end
activate BO
BO -->OperatoreAssegnazioneIstanza: Notifica Istanza\n(e-service **send_instance**)
deactivate BO
activate OperatoreAssegnazioneIstanza
OperatoreAssegnazioneIstanza ->OperatoreControllo: Assegnazione Istanza
activate OperatoreControllo
deactivate OperatoreAssegnazioneIstanza
OperatoreControllo ->OperatoreControllo: Consultazione Assegnazioni

OperatoreControllo ->OperatoreIstruttore:Assegnazione Istanza
deactivate OperatoreControllo
activate OperatoreIstruttore
OperatoreIstruttore ->OperatoreIstruttore: Consultazione istanza\n(e-service **instance_descriptor**)

OperatoreIstruttore ->BO: Download documenti \n(e-service **instance_document**)
activate BO
BO --> OperatoreIstruttore: Documenti 
deactivate BO

group #2f2e7b Opt #white [Richiesta d'integrazione]
OperatoreIstruttore ->OperatoreControllo: Richiesta
deactivate OperatoreIstruttore
activate OperatoreControllo
OperatoreControllo ->OperatoreControllo:Check


group #blue If Anomalia Richiesta d'integrazione  #white 
OperatoreControllo ->OperatoreIstruttore: Segnalazione anomalia
deactivate OperatoreControllo
activate OperatoreIstruttore
OperatoreIstruttore ->OperatoreIstruttore:Check 
OperatoreIstruttore ->OperatoreControllo: Inserimento Richiesta
activate OperatoreControllo
OperatoreControllo ->OperatoreControllo: Check
deactivate OperatoreIstruttore
end

OperatoreControllo ->BO: Inoltro \n(e-service **request_integration **)
activate BO
deactivate OperatoreControllo
BO->OperatoreControllo: Invio Integrazione
activate OperatoreControllo
BO->OperatoreIstruttore: Invio Integrazione
deactivate BO
activate OperatoreIstruttore
OperatoreControllo ->OperatoreControllo: Consulto Integrazione
deactivate OperatoreControllo 
OperatoreIstruttore ->OperatoreIstruttore: Consulto Integrazione


end
OperatoreIstruttore ->OperatoreIstruttore: Conclusioni
OperatoreIstruttore ->OperatoreControllo: Inserimento conclusioni

activate OperatoreControllo
deactivate OperatoreIstruttore
OperatoreControllo ->OperatoreControllo: Verifica


group #blue If Anomalia Conclusioni #white
OperatoreControllo ->OperatoreIstruttore: Segnala Anomalia
deactivate OperatoreControllo
activate OperatoreIstruttore
OperatoreIstruttore ->OperatoreIstruttore: Check
OperatoreIstruttore ->OperatoreControllo : Inserimento conclusioni
deactivate OperatoreIstruttore
activate OperatoreControllo
OperatoreControllo ->OperatoreControllo: Verifica
end


OperatoreControllo -> BO: Inoltro \n(e-service **send_conclusions)
deactivate OperatoreControllo

